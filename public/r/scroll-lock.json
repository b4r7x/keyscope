{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "scroll-lock",
  "title": "Scroll Lock",
  "description": "Prevent body/element scrolling with reference counting",
  "dependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "path": "src/hooks/use-scroll-lock.ts",
      "content": "\"use client\";\n\nimport { useEffect, type RefObject } from \"react\";\n\nconst lockCounts = new WeakMap<Element, number>();\n\nexport function useScrollLock(\n  target?: RefObject<HTMLElement | null>,\n  enabled = true,\n): void {\n  useEffect(() => {\n    if (!enabled) return;\n\n    const el = target?.current ?? document.body;\n    const count = lockCounts.get(el) ?? 0;\n    const prev = el.style.overflow;\n\n    lockCounts.set(el, count + 1);\n    if (count === 0) {\n      el.style.overflow = \"hidden\";\n    }\n\n    return () => {\n      const current = lockCounts.get(el) ?? 1;\n      const next = current - 1;\n      if (next <= 0) {\n        lockCounts.delete(el);\n        el.style.overflow = prev;\n      } else {\n        lockCounts.set(el, next);\n      }\n    };\n  }, [enabled, target]);\n}",
      "type": "registry:hook"
    }
  ],
  "meta": {
    "client": true
  },
  "type": "registry:hook"
}